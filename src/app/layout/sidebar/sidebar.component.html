<aside class="sidebar" [class.collapsed]="isCollapsed">
    <!-- Collapse Toggle Button -->
    <button class="collapse-toggle" (click)="toggleSidebar()" aria-label="Toggle Sidebar">
        <i class="fa-solid" [ngClass]="isCollapsed ? 'fa-angles-right' : 'fa-angles-left'"></i>
    </button>

    <div class="sidebar-content">
        <!-- Brand Header -->
        <div class="sidebar-header">
            <div class="brand-container">
                <div class="logo-wrapper">
                    <svg width="36" height="36" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.0209 0.0611464C13.9496 0.028535 13.8313 0.028535 13.758 0.0611464L0.130446 6.34089C0.0591083 6.3735 0 6.46522 0 6.54471C0 6.54471 0 7.80229 0 15.3253C0 25.8772 12.3842 31.7045 13.8884 31.7045C15.3926 31.7045 27.7768 25.8772 27.7768 15.3253C27.7768 7.80229 27.7768 6.54471 27.7768 6.54471C27.7768 6.46522 27.7177 6.3735 27.6464 6.33885L14.0209 0.0611464Z" fill="var(--color-primary)"/>
                        <mask id="mask0" maskUnits="userSpaceOnUse" x="0" y="0" width="28" height="32">
                            <path d="M13.8884 0L0 6.4C0 6.4 0 7.80229 0 15.3253C0 25.8772 12.3842 31.7045 13.8884 31.7045C15.3926 31.7045 27.7768 25.8772 27.7768 15.3253C27.7768 7.80229 27.7768 6.4 27.7768 6.4L13.8884 0Z" fill="white"/>
                        </mask>
                        <g mask="url(#mask0)">
                            <path d="M28.1705 0H13.8887V31.7045H28.1705V0Z" fill="var(--color-primary-dark)"/>
                        </g>
                        <path d="M19.3121 15.3906L11.5934 23.8471C11.3814 24.0815 11.0818 24.2181 10.8066 24.212C10.7292 24.2242 10.6558 24.2242 10.5845 24.212C10.2624 24.1101 10.1157 23.7839 10.2257 23.4211L12.4576 17.7121H9.15364C8.27924 17.7121 7.7595 17.0028 7.99389 16.1284C8.07338 15.8288 8.23848 15.5353 8.46676 15.2805L16.1834 6.82395C16.4505 6.50599 16.8683 6.35516 17.1903 6.45911C17.5124 6.56102 17.6591 6.88713 17.5491 7.24993L15.3172 12.961H18.6252C19.4996 12.961 20.0194 13.6703 19.785 14.5447C19.7034 14.8423 19.5404 15.1378 19.3121 15.3906Z" fill="white"/>
                    </svg>
                </div>
                <div class="brand-text" *ngIf="!isCollapsed">
                    <h1 class="brand-title">Stellar Security</h1>
                    <p class="brand-subtitle">Enterprise Protection</p>
                </div>
            </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="nav-menu">
            <a *ngFor="let item of navigationItems"
               [routerLink]="item.route"
               routerLinkActive="active"
               [routerLinkActiveOptions]="{exact: false}"
               class="nav-link"
               [attr.aria-label]="item.label">
                <div class="nav-link-content">
                    <span class="nav-icon">
                        <i [class]="item.icon"></i>
                    </span>
                    <span class="nav-label" *ngIf="!isCollapsed">{{ item.label }}</span>
                </div>
                <div class="nav-indicator"></div>
            </a>
        </nav>

        <!-- Info Box -->
        <div class="info-box" [class.expanded]="isInfoBoxExpanded" *ngIf="!isCollapsed">
            <div class="info-box-header" (click)="toggleInfoBox()">
                <div class="info-title">
                    <span class="info-icon">
                        <i class="fa-solid fa-shield-halved"></i>
                    </span>
                    <span class="info-title-text">Stellar ID</span>
                </div>
                <i class="fa-solid fa-chevron-down info-expand-icon"
                   [class.rotated]="isInfoBoxExpanded"></i>
            </div>
            <div class="info-box-content"
                 [@expandCollapse]="isInfoBoxExpanded ? 'expanded' : 'collapsed'"
                 *ngIf="isInfoBoxExpanded || !isCollapsed">
                <p class="info-text">
                    All your Stellar apps share the same secure ID across phone, desktop and cloud.
                </p>
                <button class="info-action-btn" (click)="$event.stopPropagation()">
                    <i class="fa-solid fa-arrow-right"></i>
                    Learn More
                </button>
            </div>
        </div>
    </div>

    <!-- User Profile Footer -->
    <div class="sidebar-footer">
        <div class="user-profile">
            <div class="avatar">
                <span class="avatar-text">{{ user?.initials }}</span>
                <div class="avatar-status"></div>
            </div>
            <div class="user-details" *ngIf="!isCollapsed">
                <p class="user-name">{{ user?.name }}</p>
                <p class="user-email">{{ user?.email }}</p>
            </div>
        </div>
        <button class="sign-out-btn"
                (click)="onSignOut()"
                [attr.aria-label]="'Sign out'"
                *ngIf="!isCollapsed">
            <i class="fa-solid fa-arrow-right-from-bracket"></i>
        </button>
    </div>
</aside>
